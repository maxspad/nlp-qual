<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>NLP-QuAL Results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="results_lite_files/libs/clipboard/clipboard.min.js"></script>
<script src="results_lite_files/libs/quarto-html/quarto.js"></script>
<script src="results_lite_files/libs/quarto-html/popper.min.js"></script>
<script src="results_lite_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="results_lite_files/libs/quarto-html/anchor.min.js"></script>
<link href="results_lite_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="results_lite_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="results_lite_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="results_lite_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="results_lite_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#qual-score" id="toc-qual-score" class="nav-link active" data-scroll-target="#qual-score">QuAL Score</a></li>
  <li><a href="#data-descriptives-and-demographics" id="toc-data-descriptives-and-demographics" class="nav-link" data-scroll-target="#data-descriptives-and-demographics">Data Descriptives and Demographics</a>
  <ul class="collapse">
  <li><a href="#score-distributions" id="toc-score-distributions" class="nav-link" data-scroll-target="#score-distributions">Score Distributions</a></li>
  <li><a href="#interrater-reliability" id="toc-interrater-reliability" class="nav-link" data-scroll-target="#interrater-reliability">Interrater Reliability</a></li>
  <li><a href="#other-demographics-and-descriptive-statistics" id="toc-other-demographics-and-descriptive-statistics" class="nav-link" data-scroll-target="#other-demographics-and-descriptive-statistics">Other Demographics and Descriptive Statistics</a></li>
  </ul></li>
  <li><a href="#model-performance" id="toc-model-performance" class="nav-link" data-scroll-target="#model-performance">Model Performance</a>
  <ul class="collapse">
  <li><a href="#metrics" id="toc-metrics" class="nav-link" data-scroll-target="#metrics">Metrics</a></li>
  <li><a href="#q1" id="toc-q1" class="nav-link" data-scroll-target="#q1">Q1</a></li>
  <li><a href="#q2" id="toc-q2" class="nav-link" data-scroll-target="#q2">Q2</a></li>
  <li><a href="#q3" id="toc-q3" class="nav-link" data-scroll-target="#q3">Q3</a></li>
  <li><a href="#qual" id="toc-qual" class="nav-link" data-scroll-target="#qual">QuAL</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">NLP-QuAL Results</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="qual-score" class="level2">
<h2 class="anchored" data-anchor-id="qual-score">QuAL Score</h2>
<p>As a review, the QuAL score aims to assess the quality of written feedback for medical trainees. It has been validated in a GME context. It ranges from 0 (lowest quality) to 6 (highest quality). It is the sum of three subscores:</p>
<ul>
<li>Q1 - Does the rater provide sufficient evidence about resident performance? (Rated on a three-point scale: 0-no comment at all, 1-no, but comment present, 2-somewhat, 3-yes/full description)</li>
<li>Q2 - Suggestion - Does the rater provide a suggestion for improvement? (0-no/1-yes)</li>
<li>Q3 - Connection - Is the rater’s suggestion linked to the behavior described? (0-no/1-yes)</li>
</ul>
</section>
<section id="data-descriptives-and-demographics" class="level2">
<h2 class="anchored" data-anchor-id="data-descriptives-and-demographics">Data Descriptives and Demographics</h2>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<p>We analyzed 2500 evaluations, with 1250 from Site 1 (McMaster) and 1250 from Site 2 (Saskatchewan).</p>
</div>
</div>
<p>For each evaluation, the QuAL score was rated by two separate raters. Each sub-score (Q1, Q2, and Q3) was rated and then summed to get the final QuAL score. Discrepancies were broken by members of the study team (who?)</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<p>The average QuAL score was 2.6408, with standard deviation 1.275, median 3.0</p>
</div>
</div>
<p>Descriptive statistics for the subscores and QuAL Score were:</p>
<div class="cell" data-execution_count="34">
<div class="cell-output cell-output-display" data-execution_count="34">
<div id="tbl-descrips" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 1:  Descriptive Statistics for Subscores/QuAL </caption>
  <thead>
    <tr>
      <th></th>
      <th>Q1</th>
      <th>Q2</th>
      <th>Q3</th>
      <th>QUAL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2500.000000</td>
      <td>2500.000000</td>
      <td>2500.000000</td>
      <td>2500.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2.277200</td>
      <td>0.193600</td>
      <td>0.170000</td>
      <td>2.640800</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.860149</td>
      <td>0.395198</td>
      <td>0.375708</td>
      <td>1.275157</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<section id="score-distributions" class="level3">
<h3 class="anchored" data-anchor-id="score-distributions">Score Distributions</h3>
<section id="subscores" class="level4">
<h4 class="anchored" data-anchor-id="subscores">Subscores</h4>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div id="tbl-distsubscore" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 2:  Subscore Rating Counts/Frequencies </caption>
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">Q1</th>
      <th colspan="2" halign="left">Q2</th>
      <th colspan="2" halign="left">Q3</th>
    </tr>
    <tr>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>105</td>
      <td>4.20</td>
      <td>2016.0</td>
      <td>80.64</td>
      <td>2075.0</td>
      <td>83.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>359</td>
      <td>14.36</td>
      <td>484.0</td>
      <td>19.36</td>
      <td>425.0</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>774</td>
      <td>30.96</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1262</td>
      <td>50.48</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>The distribution for the subscores is plotted below:</p>
<div id="fig-distsubscores" class="cell quarto-layout-panel" data-execution_count="6">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-distsubscores-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-distsubscores-output-1.png" class="img-fluid figure-img" data-ref-parent="fig-distsubscores"></p>
<p></p><figcaption class="figure-caption">(a) Q1</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-distsubscores-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-distsubscores-output-2.png" class="img-fluid figure-img" data-ref-parent="fig-distsubscores"></p>
<p></p><figcaption class="figure-caption">(b) Q2</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-distsubscores-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-distsubscores-output-3.png" class="img-fluid figure-img" data-ref-parent="fig-distsubscores"></p>
<p></p><figcaption class="figure-caption">(c) Q3</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 1: Distribution of QuAL Subscores</figcaption><p></p>
</figure>
</div>
<p>Evaluations tended to score highly (&gt; 2) on Q1, but poorly (80% 0 and 83% 0, respectively) on Q2 and Q3. There were large differences in scores between the two sites.</p>
</section>
<section id="qual-score-1" class="level4">
<h4 class="anchored" data-anchor-id="qual-score-1">QuAL Score</h4>
<p>The table below shows the raw counts and percentages associated with each level of the rated QuAL score.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-distqual" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 3:  QuAL Rating Counts/Frequencies </caption>
  <thead>
    <tr>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100</td>
      <td>4.00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>338</td>
      <td>13.52</td>
    </tr>
    <tr>
      <th>2</th>
      <td>685</td>
      <td>27.40</td>
    </tr>
    <tr>
      <th>3</th>
      <td>957</td>
      <td>38.28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>77</td>
      <td>3.08</td>
    </tr>
    <tr>
      <th>5</th>
      <td>343</td>
      <td>13.72</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>The distribution of the QuAL score is plotted below:</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div id="fig-distqual" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-distqual-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 2: Distribution of QuAL Subscores</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>This table shows the counts/frequencies for each possible combination of subscores. For each possible final QuAL score, the table shows the combination fo subscores most likely to generate that QuAL score.</p>
<div class="cell" data-execution_count="25">
<div class="cell-output cell-output-display" data-execution_count="25">
<div id="tbl-qualcounts" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 4:  Subscore Combinations/Counts for each QuAL Score </caption>
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
    <tr>
      <th>QUAL</th>
      <th>Q1</th>
      <th>Q2</th>
      <th>Q3</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <th>0</th>
      <th>0</th>
      <th>0</th>
      <td>100</td>
      <td>4.00</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>0</th>
      <th>1</th>
      <th>0</th>
      <td>5</td>
      <td>0.20</td>
    </tr>
    <tr>
      <th>1</th>
      <th>0</th>
      <th>0</th>
      <td>333</td>
      <td>13.32</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">2</th>
      <th rowspan="2" valign="top">1</th>
      <th>0</th>
      <th>1</th>
      <td>1</td>
      <td>0.04</td>
    </tr>
    <tr>
      <th>1</th>
      <th>0</th>
      <td>21</td>
      <td>0.84</td>
    </tr>
    <tr>
      <th>2</th>
      <th>0</th>
      <th>0</th>
      <td>663</td>
      <td>26.52</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">3</th>
      <th>1</th>
      <th>1</th>
      <th>1</th>
      <td>4</td>
      <td>0.16</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">2</th>
      <th>0</th>
      <th>1</th>
      <td>2</td>
      <td>0.08</td>
    </tr>
    <tr>
      <th>1</th>
      <th>0</th>
      <td>41</td>
      <td>1.64</td>
    </tr>
    <tr>
      <th>3</th>
      <th>0</th>
      <th>0</th>
      <td>910</td>
      <td>36.40</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">4</th>
      <th>2</th>
      <th>1</th>
      <th>1</th>
      <td>68</td>
      <td>2.72</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">3</th>
      <th>0</th>
      <th>1</th>
      <td>7</td>
      <td>0.28</td>
    </tr>
    <tr>
      <th>1</th>
      <th>0</th>
      <td>2</td>
      <td>0.08</td>
    </tr>
    <tr>
      <th>5</th>
      <th>3</th>
      <th>1</th>
      <th>1</th>
      <td>343</td>
      <td>13.72</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>This table yields some interesting insights. The QuAL score subscores are dependent on one another. Based on the structure of the subscores, it follows that if the evaluation is not detailed enough (Q1 <span class="math inline">\(\leq\)</span> 2), it’s unlikely to contain a suggestion for improvement (Q1 = 0), and there can be no linking between behavior and improvement (Q3 = 0). The table backs this up, with the vast majority of Q2 and Q3 rated as zero if Q1 <span class="math inline">\(\leq\)</span> 2. If the evaluation is highly detailed (Q3 = 3), then naturally it is more likely to have a suggestion for improvement (Q2 = 1), and based on the table, it’s also likely to link the suggestion to the behavior (Q3 = 1). Q3 is essentially redundant; Q3 is discrepant from Q3 in only 3.1% of all evaluations.</p>
<p>This means that the QuAL score can be reduced to three primary outcomes:</p>
<ul>
<li>Q1 <span class="math inline">\(\leq\)</span> 2 - low detail, very unlikely (&lt;10%) to contain suggestion for improvement</li>
<li>Q1 = 3; Q2 and Q3 = 0 - high detail, no suggestion for improvement</li>
<li>Q1 = 3; Q2 and Q3 = 1 - high detail, with suggestion for improvement, extremely likely to have connection between behavior/suggestion</li>
</ul>
<p>These three scenarios fit 2,349/2,500 = 94% of evaluations. This provides an opportunity to condense the QuAL score from 6 levels (0-5) to 3. Although the remainder of the results below do <em>not</em> condense the QuAL score, this could be a good way to boost accuracy results in a way that does not compromise the integrity of the score itself.</p>
</section>
</section>
<section id="interrater-reliability" class="level3">
<h3 class="anchored" data-anchor-id="interrater-reliability">Interrater Reliability</h3>
<p>This table shows the percent agreement for the QUAL score and each subscore</p>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<div id="tbl-percentmatch" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 5:  Interrater Agreement Counts and Frequencies </caption>
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">Q1Match</th>
      <th colspan="2" halign="left">Q2Match</th>
      <th colspan="2" halign="left">Q3Match</th>
      <th colspan="2" halign="left">QUALMatch</th>
    </tr>
    <tr>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>False</th>
      <td>1059</td>
      <td>42.36</td>
      <td>188</td>
      <td>7.52</td>
      <td>606</td>
      <td>24.24</td>
      <td>1426</td>
      <td>57.04</td>
    </tr>
    <tr>
      <th>True</th>
      <td>1441</td>
      <td>57.64</td>
      <td>2312</td>
      <td>92.48</td>
      <td>1894</td>
      <td>75.76</td>
      <td>1074</td>
      <td>42.96</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<div id="tbl-kappa" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 6:  Cohen’s Kappas </caption>
  <thead>
    <tr>
      <th></th>
      <th>Cohen's Kappa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Q1</th>
      <td>0.387601</td>
    </tr>
    <tr>
      <th>Q2</th>
      <td>0.751249</td>
    </tr>
    <tr>
      <th>Q3</th>
      <td>0.351520</td>
    </tr>
    <tr>
      <th>QuAL</th>
      <td>0.317628</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Cohen’s Kappas were calculated and are presented above. There was fair agreement for all scores except for Q1, which had substantial agreement. This was before any tiebreaking/discrepancy correction.</p>
</section>
<section id="other-demographics-and-descriptive-statistics" class="level3">
<h3 class="anchored" data-anchor-id="other-demographics-and-descriptive-statistics">Other Demographics and Descriptive Statistics</h3>
<p>These may or may not be relevant.</p>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">
<div id="tbl-gender" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 7:  Reported Genders (actually sexes) of Residents and Faculty </caption>
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">GenderRes</th>
      <th colspan="2" halign="left">GenderFac</th>
    </tr>
    <tr>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Female</th>
      <td>1037.0</td>
      <td>41.48</td>
      <td>877</td>
      <td>35.08</td>
    </tr>
    <tr>
      <th>Male</th>
      <td>1463.0</td>
      <td>58.52</td>
      <td>1447</td>
      <td>57.88</td>
    </tr>
    <tr>
      <th>Unknown</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>176</td>
      <td>7.04</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>ObserverType stratifies the evaluator by role.</p>
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<div id="tbl-observertype" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 8:  Evaluator Types </caption>
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">ObserverType</th>
    </tr>
    <tr>
      <th></th>
      <th>Count</th>
      <th>Percent of Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>clinical supervisor</th>
      <td>1200</td>
      <td>48.0</td>
    </tr>
    <tr>
      <th>faculty</th>
      <td>1165</td>
      <td>46.6</td>
    </tr>
    <tr>
      <th>resident</th>
      <td>135</td>
      <td>5.4</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Only one of the two sites reports PGY levels for their trainees on their evaluations.</p>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">
<div id="tbl-pgy" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 9:  Reported PGY years of learners </caption>
  <thead>
    <tr>
      <th></th>
      <th>PGY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Unknown</th>
      <td>1251</td>
    </tr>
    <tr>
      <th>2</th>
      <td>510</td>
    </tr>
    <tr>
      <th>1</th>
      <td>456</td>
    </tr>
    <tr>
      <th>3</th>
      <td>157</td>
    </tr>
    <tr>
      <th>4</th>
      <td>117</td>
    </tr>
    <tr>
      <th>5</th>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="model-performance" class="level2">
<h2 class="anchored" data-anchor-id="model-performance">Model Performance</h2>
<section id="metrics" class="level3">
<h3 class="anchored" data-anchor-id="metrics">Metrics</h3>
<p>Models were assessed using the following performance metrics:</p>
<ul>
<li><em>Balanced Accuracy</em> - The weighted average of accuracies for each possible class (rating). In situations where the data is imbalanced, including this one, accuracy can be falsely inflated if the model over-biases against the rare classes. Balanced accuracy compensates for this and provides a more valid assessment of model performance in the real world. It is the most important metric evaluated.</li>
<li><em>Accuracy</em> - The percentage of time the model made the correct guess about the rating</li>
<li><em>Top 2 Accuracy</em> - The percentage of time the model’s first guess <strong>or</strong> second guess was correct. Only applies to targets with <span class="math inline">\(\geq\)</span> 2 levels (Q1 and overall QuAL)</li>
<li><em>Top 3 Accuracy</em> - Same as above but includes first, second, or third guess.</li>
<li><em>Mean absolute error (MAE)</em> - Average discrepancy between the model’s guess and the true rating. Useful for Q1 and QuAL.</li>
<li><em>ROC AUC Score</em> - Area under the receiver operating curve. Common metric reported in ML literature. Subject to inflation if classes are imbalanced. Only well-defined for two-class targets (Q2 and Q3).</li>
<li><em>Precision</em> - Positive predictive value, the chance that a “positive” prediction (usually defined as the outcome of interest, in this case <strong>lower</strong> quality) is actually correct. Best defined for two-class targets, but averages can be taken for multi-class targets (Q1 and QuAL).</li>
<li><em>Recall</em> - Sensitivity</li>
<li><em>F1</em> - The geometric mean of precision and recall, often reported in the ML literature.</li>
<li><em>Confusion Matrix</em> - A <em>n_classes</em> by <em>n_classes</em> matrix, where the <span class="math inline">\(i,j\)</span>th entry is the number of items with true rating <span class="math inline">\(i\)</span> and predicted rating <span class="math inline">\(j\)</span>. A perfect classifier would produce a confusion matrix non-zero only on the diagonal. The confusion matrix shows you which ratings the model is struggling with.</li>
<li><em>Support</em> - Not a metric, <em>per se</em>, but the number of items in the test set which received the given rating.</li>
</ul>
</section>
<section id="q1" class="level3">
<h3 class="anchored" data-anchor-id="q1">Q1</h3>
<p>Q1 assessed the level of evidence about the learner’s performance provided in the evaluation. Specifically, Q1 asked, “Does the rater provide sufficient evidence about resident performance?” It was rated on a three-point scale: 0-no comment at all, 1-no, but comment present, 2-somewhat, 3-yes/full description.</p>
<p>The table below shows the model performance metrics for Q1.</p>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display" data-execution_count="17">
<div id="tbl-q1metrics" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 10:  Q1 Metrics </caption>
  <thead>
    <tr>
      <th></th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>balanced_accuracy</th>
      <td>0.590736</td>
    </tr>
    <tr>
      <th>accuracy</th>
      <td>0.624000</td>
    </tr>
    <tr>
      <th>top_2_acc</th>
      <td>0.880000</td>
    </tr>
    <tr>
      <th>top_3_acc</th>
      <td>0.973333</td>
    </tr>
    <tr>
      <th>precision</th>
      <td>0.620417</td>
    </tr>
    <tr>
      <th>recall</th>
      <td>0.590736</td>
    </tr>
    <tr>
      <th>f1</th>
      <td>0.598159</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Overall, model performance for Q1 is relatively weak when considered from an absolute accuracy standpoint, getting on average 59% of predictions correct. However, as Q1 has four possible ratings (0-3), random guessing would be correct only 25% of the time, so our model performs 2.36 times better than random. Looking at the Top 2 Accuracy, we see the model contains the true rating within its top-2 predictions 88% of the time, which further demonstrates that the model is “on the right track.”</p>
<p>Exploring performance by class level and visualizing the confusion matrix, we can begin to see the reasons for high/low performance:</p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-display" data-execution_count="18">
<div id="tbl-q1byrating" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 11:  Q1 Performance by Rating </caption>
  <thead>
    <tr>
      <th></th>
      <th>F1 Score</th>
      <th>Support</th>
    </tr>
    <tr>
      <th>Q1 Rating</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.727273</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.400000</td>
      <td>49.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.500000</td>
      <td>113.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.765363</td>
      <td>188.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<div id="fig-q1conf" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-q1conf-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 3: Q1 Confusion Matrix</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The model performs best at the extremes, the Q1 = 0 and Q1 = 3 ratings perform well, but when Q1 = 1 and Q1 = 2, the model has trouble differentiating the “nuances” at this level. This is to be expected, as the human raters struggled to differentiate between these levels as well. The table below shows the percent of human rater agreement for Q1 stratified by Q1 rating:</p>
<div class="cell" data-execution_count="20">
<div class="cell-output cell-output-display" data-execution_count="20">
<div id="tbl-q1humanmatch" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 12:  Percent Human Match by Q1 Rating </caption>
  <thead>
    <tr>
      <th></th>
      <th>Percent Human Match</th>
    </tr>
    <tr>
      <th>Q1</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>97.142857</td>
    </tr>
    <tr>
      <th>1</th>
      <td>84.679666</td>
    </tr>
    <tr>
      <th>2</th>
      <td>40.439276</td>
    </tr>
    <tr>
      <th>3</th>
      <td>57.210777</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
</section>
<section id="q2" class="level3">
<h3 class="anchored" data-anchor-id="q2">Q2</h3>
<p>Q2 assessed whether or not the evaluator provided a suggestion for improvement in the written evaluation. It asked, “Does the rater provide a suggestion for improvement? (0-no/1-yes)”</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Because it is more important to identify low-quality feedback, when the model was trained, the ratings were inverted. That is, the “positive” (thing that needed to be identified) was switched to Q2 = <strong>0</strong>.</p>
</div>
</div>
<p>The table below shows the model performance metrics for Q3.</p>
<div class="cell" data-execution_count="22">
<div class="cell-output cell-output-display" data-execution_count="22">
<div id="tbl-q2metrics" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 13:  Q2 Metrics </caption>
  <thead>
    <tr>
      <th></th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>balanced_accuracy</th>
      <td>0.775220</td>
    </tr>
    <tr>
      <th>accuracy</th>
      <td>0.834667</td>
    </tr>
    <tr>
      <th>precision</th>
      <td>0.923611</td>
    </tr>
    <tr>
      <th>recall</th>
      <td>0.869281</td>
    </tr>
    <tr>
      <th>f1</th>
      <td>0.895623</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Q2 was the highest performing model, as it represented the simplest question - simply, was there a suggestion or not. It was better at predicting if there was <em>not</em> a suggestion. It had 92% sensitivity detecting failure to provide a suggestion, with a PPV of 86.9%.</p>
</section>
<section id="q3" class="level3">
<h3 class="anchored" data-anchor-id="q3">Q3</h3>
<p>Q3 assessed if the evalutor connected the learner’s behavior with the suggestion for improvement. Specifically, it asked, “Is the rater’s suggestion linked to the behavior described? (0-no/1-yes)”</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Because it is more important to identify low-quality feedback, when the model was trained, the ratings were inverted. That is, the “positive” (thing that needed to be identified) was switched to Q3 = <strong>0</strong>.</p>
</div>
</div>
<p>The table below shows the model performance metrics for Q3.</p>
<div class="cell" data-execution_count="24">
<div class="cell-output cell-output-display" data-execution_count="24">
<div id="tbl-q3metrics" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 14:  Q3 Metrics </caption>
  <thead>
    <tr>
      <th></th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>balanced_accuracy</th>
      <td>0.764813</td>
    </tr>
    <tr>
      <th>accuracy</th>
      <td>0.845333</td>
    </tr>
    <tr>
      <th>precision</th>
      <td>0.933333</td>
    </tr>
    <tr>
      <th>recall</th>
      <td>0.880503</td>
    </tr>
    <tr>
      <th>f1</th>
      <td>0.906149</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Q3 performed as well or better than Q2. It had a 93% sensitivity for failure to connect action to suggestion and a PPV of 88%. Q2 and Q3 are nearly redundant (discrepant only 3% of the time), as show in <a href="#tbl-qualcounts">Table&nbsp;4</a>, so it makes sense that Q3 is a high-performer.</p>
</section>
<section id="qual" class="level3">
<h3 class="anchored" data-anchor-id="qual">QuAL</h3>
<p>The table below shows the model performance metrics for the overall QuAL score.</p>
<div class="cell" data-execution_count="31">
<div class="cell-output cell-output-display" data-execution_count="31">
<div id="tbl-qualmetrics" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 15:  QuAL Metrics </caption>
  <thead>
    <tr>
      <th></th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>balanced_accuracy</th>
      <td>0.438582</td>
    </tr>
    <tr>
      <th>accuracy</th>
      <td>0.469333</td>
    </tr>
    <tr>
      <th>top_2_acc</th>
      <td>0.749333</td>
    </tr>
    <tr>
      <th>top_3_acc</th>
      <td>0.890667</td>
    </tr>
    <tr>
      <th>mae</th>
      <td>0.722667</td>
    </tr>
    <tr>
      <th>precision</th>
      <td>0.439958</td>
    </tr>
    <tr>
      <th>recall</th>
      <td>0.438582</td>
    </tr>
    <tr>
      <th>f1</th>
      <td>0.435110</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Overall, ***</p>
<p>Exploring performance by class level and visualizing the confusion matrix, we can begin to see the reasons for high/low performance:</p>
<div class="cell" data-execution_count="33">
<div class="cell-output cell-output-display" data-execution_count="33">
<div id="tbl-qualbyrating" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table 16:  QuAL Performance by Rating Level </caption>
  <thead>
    <tr>
      <th></th>
      <th>F1 Score</th>
      <th>Support</th>
    </tr>
    <tr>
      <th>QuAL Rating</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.711111</td>
      <td>24.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.336449</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.336735</td>
      <td>99.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.577617</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.071429</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.577320</td>
      <td>47.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="cell-output cell-output-display">
<div id="fig-qualconf" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="results_lite_files/figure-html/fig-qualconf-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 4: QuAL Confusion Matrix</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>